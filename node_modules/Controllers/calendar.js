var fileWriter = require('./fileWriter');

//---------- enumerators ---------------

var days = ["monday", "tuesday", "wednesday", "thursday", "friday", "saturday", "sunday"];
var outputFilename = "/Termostato/store/calendar.js";

//---------- globals ---------------

var myCalendar = {
					monday:[],
					tuesday:[],
					wednesday:[],
					thursday:[],
					friday:[],
					saturday:[],
					sunday:[]
				};

//---------- privates ---------------



//---------- methods ---------------

var init = function(){

}

fileWriter.read(outputFilename, 
	function(err, data) {
		if (err) throw err;	
		console.log(data);
	}
);

var add = function(data){
	
	var timeSpan = {
						start: data.startTime, 
						end: data.endTime, 
						temperature: data.temp
					};
	
	switch (data.day){
		case 'monday':
			myCalendar.monday.push(timeSpan);
		break;
		case 'tuesday':
			myCalendar.tuesday.push(timeSpan);
		break;
		case 'wednesday':
			myCalendar.wednesday.push(timeSpan);
		break;
		case 'thursday':
			myCalendar.thursday.push(timeSpan);
		break;
		case 'friday':
			myCalendar.friday.push(timeSpan);
		break;
		case 'saturday':
			myCalendar.saturday.push(timeSpan);
		break;
		case 'sunday':
			myCalendar.sunday.push(timeSpan);
		break;
	}
	fileWriter.write(outputFilename, myCalendar);
	return { 'day': data.day, 'calendar': myCalendar[data.day] };
};//add

var remove = function(data){
	
	switch (data.day){
		case 'monday':
				myCalendar.monday.splice(data.pos,1);
		break;
		case 'tuesday':
				myCalendar.tuesday.splice(data.pos,1);
		break;
		case 'wednesday':
				myCalendar.wednesday.splice(data.pos,1);
		break;
		case 'thursday':
				myCalendar.thursday.splice(data.pos,1);
		break;
		case 'friday':
				myCalendar.friday.splice(data.pos,1);
		break;
		case 'saturday':
				myCalendar.saturday.splice(data.pos,1);
		break;
		case 'sunday':
				myCalendar.sunday.splice(data.pos,1);
		break;
	}//switch
	return { 'day': data.day, 'calendar': myCalendar[data.day] };
};//remove

var removeAll = function(){
	myCalendar.monday = [];
	myCalendar.tuesday = [];
	myCalendar.wednesday = [];
	myCalendar.thursday = [];
	myCalendar.friday = [];
	myCalendar.sunday = [];
	myCalendar.saturday = [];
};//removeAll

//---------- exports ---------------

exports.myCalendar = myCalendar;
exports.add = add;
exports.remove = remove;
exports.removeAll = removeAll;